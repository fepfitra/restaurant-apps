{"version":3,"file":"sw.bundle.js","mappings":";mBAYA,QAZe,CACbA,SAAU,uCACVC,cAAe,gBACfC,eAAgB,iBAChBC,cAAe,gBACfC,YAAY,IAAIC,MAAOC,cACvBC,cAAe,kBACfC,iBAAkB,EAClBC,kBAAmB,cACnBC,kBAAmB,qRCRrB,ovNA6CA,QA5CoB,CACZC,gBAAe,SAACC,GAAU,4HACV,EAAKC,aAAY,OAAvB,EAAH,KACLC,OAAOF,GAAU,0CAFO,EAGhC,EAEMG,eAAc,WAAG,iHACIC,OAAOC,OAAM,OAAnB,EAAH,KAEbC,QAAO,SAACC,GAAI,OAAKA,IAASC,EAAAA,UAAiB,IAC3CC,KAAI,SAACC,GAAY,OAAKN,OAAM,OAAQM,EAAa,IAAE,0CAJjC,EAKvB,EAEMC,gBAAe,SAACC,GAAS,kIACNR,OAAOS,MAAMD,GAAQ,OAA9B,GAARE,EAAW,EAAH,MAEVF,EAAS,CAAF,eACmB,OAA5B,EAAKG,cAAcH,GAAS,kBACrBE,GAAQ,gCAEV,EAAKC,cAAcH,IAAQ,0CAPL,EAQ/B,EAEMG,cAAa,SAACH,GAAS,kIACJI,MAAMJ,GAAQ,OAAvB,IAARE,EAAW,EAAH,OAEuB,MAApBA,EAASG,OAAc,yCAC/BH,GAAQ,uBAGX,EAAKI,UAAUN,GAAQ,gCACtBE,GAAQ,0CARY,EAS7B,EAEMI,UAAS,SAACN,GAAS,4HACH,EAAKX,aAAY,OAAvB,EAAH,KACLkB,IAAIP,GAAS,0CAFI,EAGzB,EAEMX,WAAU,WAAG,0HACVG,OAAOgB,KAAKZ,EAAAA,aAAkB,0CADpB,EAEnB,GCzCF,IAAMa,EAAe,CACnB,KACA,gBACA,eACA,kBACA,iBACA,kBAGFC,KAAKC,iBAAiB,WAAW,SAACC,GAChCA,EAAMC,UAAUC,EAAAA,gBAA4B,GAAD,OAAKL,IAClD,IAEAC,KAAKC,iBAAiB,YAAY,SAACC,GACjCA,EAAMC,UAAUC,EAAAA,iBAClB,IAEAJ,KAAKC,iBAAiB,SAAS,SAACC,GAC9BA,EAAMG,YAAYX,MAAMQ,EAAMZ,SAChC","sources":["webpack://restaurant-apps/./src/scripts/globals/config.js","webpack://restaurant-apps/./src/scripts/utils/cache-helper.js","webpack://restaurant-apps/./src/scripts/sw.js"],"sourcesContent":["const CONFIG = {\n  BASE_URL: 'https://restaurant-api.dicoding.dev/',\n  SMALL_PICTURE: 'images/small/',\n  MEDIUM_PICTURE: 'images/medium/',\n  LARGE_PICTURE: 'images/large/',\n  CACHE_NAME: new Date().toISOString(),\n  DATABASE_NAME: 'night-city-food',\n  DATABASE_VERSION: 1,\n  OBJECT_STORE_NAME: 'restaurants',\n  WEB_SOCKET_SERVER: 'wss://movies-feed.dicoding.dev',\n};\n\nexport default CONFIG;\n","import CONFIG from '../globals/config';\n\nconst CacheHelper = {\n  async cachingAppShell(requests) {\n    const cache = await this._openCache();\n    cache.addAll(requests);\n  },\n\n  async deleteOldCache() {\n    const cacheNames = await caches.keys();\n    cacheNames\n      .filter((name) => name !== CONFIG.CACHE_NAME)\n      .map((filteredName) => caches.delete(filteredName));\n  },\n\n  async revalidateCache(request) {\n    const response = await caches.match(request);\n\n    if (request) {\n      this._fetchRequest(request);\n      return response;\n    }\n    return this._fetchRequest(request);\n  },\n\n  async _fetchRequest(request) {\n    const response = await fetch(request);\n\n    if (!response || response.status !== 200) {\n      return response;\n    }\n\n    await this._addCache(request);\n    return response;\n  },\n\n  async _addCache(request) {\n    const cache = await this._openCache();\n    cache.add(request);\n  },\n\n  async _openCache() {\n    return caches.open(CONFIG.CACHE_NAME);\n  },\n};\n\nexport default CacheHelper;\n","import CacheHelper from './utils/cache-helper';\n\nconst assetToCache = [\n  './',\n  './favicon.png',\n  './index.html',\n  './app.bundle.js',\n  './app.manifest',\n  './sw.bundle.js',\n];\n\nself.addEventListener('install', (event) => {\n  event.waitUntil(CacheHelper.cachingAppShell([...assetToCache]));\n});\n\nself.addEventListener('activate', (event) => {\n  event.waitUntil(CacheHelper.deleteOldCache());\n});\n\nself.addEventListener('fetch', (event) => {\n  event.respondWith(fetch(event.request));\n});\n"],"names":["BASE_URL","SMALL_PICTURE","MEDIUM_PICTURE","LARGE_PICTURE","CACHE_NAME","Date","toISOString","DATABASE_NAME","DATABASE_VERSION","OBJECT_STORE_NAME","WEB_SOCKET_SERVER","cachingAppShell","requests","_openCache","addAll","deleteOldCache","caches","keys","filter","name","CONFIG","map","filteredName","revalidateCache","request","match","response","_fetchRequest","fetch","status","_addCache","add","open","assetToCache","self","addEventListener","event","waitUntil","CacheHelper","respondWith"],"sourceRoot":""}